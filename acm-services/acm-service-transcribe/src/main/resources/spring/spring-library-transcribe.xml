<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.1.xsd">

    <bean id="transcribeDao" class="com.armedia.acm.services.transcribe.dao.TranscribeDao"/>
    <bean id="transcribeItemDao" class="com.armedia.acm.services.transcribe.dao.TranscribeItemDao"/>

    <bean id="transcribeConfigurationPropertiesService"
          class="com.armedia.acm.services.transcribe.service.TranscribeConfigurationPropertiesService">
        <property name="propertyFileManager" ref="propertyFileManager"/>
    </bean>

    <bean id="arkCaseTranscribeService" class="com.armedia.acm.services.transcribe.service.ArkCaseTranscribeServiceImpl">
        <property name="transcribeConfigurationPropertiesService" ref="transcribeConfigurationPropertiesService"/>
        <property name="mediaEngineConfigurationPropertiesService" ref="mediaEngineConfigurationPropertiesService"/>
        <property name="transcribeDao" ref="transcribeDao"/>
        <property name="ecmFileVersionDao" ref="ecmFileVersionDao"/>
        <property name="pipelineManager" ref="mediaEnginePipelineManager"/>
        <property name="mediaEngineEventPublisher" ref="mediaEngineEventPublisher"/>
        <property name="activitiRuntimeService" ref="activitiRuntimeService"/>
        <property name="ecmFileServiceProperties" ref="ecmFileServiceProperties"/>
        <property name="arkCaseBeanUtils" ref="mediaEngineArkCaseBeanUtils"/>
        <property name="ecmFileService" ref="ecmFileService"/>
        <property name="springContextHolder" ref="acmContextHolder"/>
        <property name="processHandlerMap" ref="mediaEngineDrollsProcessRules"/>
        <property name="objectLockingManager" ref="acmObjectLockingManager"/>
        <property name="templateService" ref="filesystemTemplateConfigurationService"/>
        <property name="emailSenderService" ref="smtpService"/>
        <property name="userDao" ref="userJpaDao"/>
        <property name="labelManagementService" ref="labelManagementService"/>
        <property name="acmApplication" ref="acmApplication"/>
        <property name="auditPropertyEntityAdapter" ref="auditPropertyEntityAdapter"/>
        <property name="objectLockService" ref="objectLockService"/>
        <property name="mediaEngineIntegrationService" ref="mediaEngineToolsService"/>
        <property name="mediaEngineMapper" ref="mediaEngineMapper"/>
        <property name="itemsMapper" ref="itemsMapper"/>
        <property name="mediaEngineServiceFactory" ref="mediaEngineServiceFactory"/>
    </bean>

    <bean id="transcribeToSolrTransformer" class="com.armedia.acm.services.transcribe.transformer.TranscribeToSolrTransformer">
        <property name="transcribeDao" ref="transcribeDao"/>
    </bean>

    <bean id="itemsMapper" class="com.armedia.acm.services.transcribe.mapper.ItemsMapper"/>

    <bean id="transcribeItemToSolrTransformer" class="com.armedia.acm.services.transcribe.transformer.TranscribeItemToSolrTransformer">
        <property name="transcribeItemDao" ref="transcribeItemDao"/>
    </bean>

    <bean id="transcribeQueueJob" class="com.armedia.acm.services.transcribe.job.TranscribeQueueJob">
        <property name="arkCaseTranscribeService" ref="arkCaseTranscribeService"/>
        <property name="activitiRuntimeService" ref="activitiRuntimeService"/>
        <property name="auditPropertyEntityAdapter" ref="auditPropertyEntityAdapter"/>
        <property name="mediaEngineIntegrationService" ref="mediaEngineToolsService"/>
        <property name="transcribeConfigurationPropertiesService" ref="transcribeConfigurationPropertiesService"/>
        <property name="mediaEngineMapper" ref="mediaEngineMapper"/>
        <property name="objectLockingManager" ref="acmObjectLockingManager"/>
        <property name="objectLockService" ref="objectLockService"/>
    </bean>

    <bean id="transcribeBusinessRulesExecutor" class="com.armedia.acm.services.mediaengine.rules.MediaEngineBusinessRulesExecutor"
          parent="simpleStatelessSingleObjectRuleManager">
        <property name="ruleSpreadsheetFilename" value="drools-transcribe-rules.xlsx"/>
    </bean>

    <bean id="transcribeBusinessProcessRulesExecutor"
          class="com.armedia.acm.services.mediaengine.rules.MediaEngineBusinessProcessRulesExecutor"
          parent="simpleStatelessSingleObjectRuleManager">
        <property name="ruleSpreadsheetFilename" value="drools-transcribe-business-process-rules.xlsx"/>
    </bean>

    <bean id="transcribeDroolsRulesRegister" class="com.armedia.acm.services.mediaengine.pipline.MediaEngineDroolsRulesRegister"
          depends-on="mediaEngineDrollsRules">
        <property name="rules" ref="mediaEngineDrollsRules"/>
        <property name="key" value="TRANSCRIBE"/>
        <property name="value" ref="transcribeBusinessRulesExecutor"/>
    </bean>

    <bean id="transcribeDroolsProcessRulesRegister" class="com.armedia.acm.services.mediaengine.pipline.MediaEngineDroolsRulesRegister"
          depends-on="mediaEngineDrollsProcessRules">
        <property name="rules" ref="mediaEngineDrollsProcessRules"/>
        <property name="key" value="TRANSCRIBE"/>
        <property name="value" ref="transcribeBusinessProcessRulesExecutor"/>
    </bean>

</beans>