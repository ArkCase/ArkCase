<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.1.xsd">

    <bean id="addCorrespondenceTemplate" class="com.armedia.acm.plugins.admin.web.api.AddCorrespondenceTemplatesAPI">
    </bean>

    <bean id="downloadCorrespondenceTemplate"
          class="com.armedia.acm.plugins.admin.web.api.TemplateDownloadControllerAPI">
          <property name="correspondenceFolderName" value="${user.home}/.arkcase/acm/correspondenceTemplates"/>
    </bean>

    <bean id="listCorrespondenceTemplates" class="com.armedia.acm.plugins.admin.web.api.ListAllTemplatesControllerAPI">
    </bean>

    <bean id="correspondenceQueryController" class="com.armedia.acm.plugins.admin.web.api.CorrespondenceQueryAPIController">
        <property name="correspondenceService" ref="correspondenceService"/>
    </bean>

    <bean id="correspondenceTemplateController" class="com.armedia.acm.plugins.admin.web.api.CorrespondenceTemplateAPIController">
        <property name="correspondenceService" ref="correspondenceService"/>
        <property name="correspondenceFolderName" value="${user.home}/.arkcase/acm/correspondenceTemplates"/>
    </bean>

    <bean id="correspondenceMergeFieldController" class="com.armedia.acm.plugins.admin.web.api.CorrespondenceMergeFieldAPIController">
        <property name="correspondenceService" ref="correspondenceService"/>
    </bean>


    <!-- Label management API -->
    <bean id="labelManagementRetrieveResource"
          class="com.armedia.acm.plugins.admin.web.api.LabelManagementRetrieveResource">
        <property name="labelManagementService" ref="labelManagementService"/>
    </bean>

    <bean id="labelManagementResetResource" class="com.armedia.acm.plugins.admin.web.api.LabelManagementResetResource">
        <property name="labelManagementService" ref="labelManagementService"/>
    </bean>

    <bean id="labelManagementRefreshResource"
          class="com.armedia.acm.plugins.admin.web.api.LabelManagementRefreshResource">
        <property name="labelManagementService" ref="labelManagementService"/>
    </bean>

    <bean id="labelManagementUpdateResource"
          class="com.armedia.acm.plugins.admin.web.api.LabelManagementUpdateResource">
        <property name="labelManagementService" ref="labelManagementService"/>
    </bean>

    <bean id="labelManagementRetrieveAdminResource"
          class="com.armedia.acm.plugins.admin.web.api.LabelManagementRetrieveAdminResource">
        <property name="labelManagementService" ref="labelManagementService"/>
    </bean>

    <bean id="labelManagementRetrieveSettings"
          class="com.armedia.acm.plugins.admin.web.api.LabelManagementRetrieveSettings">
        <property name="labelManagementService" ref="labelManagementService"/>
    </bean>

    <bean id="labelManagementUpdateSettings"
          class="com.armedia.acm.plugins.admin.web.api.LabelManagementUpdateSettings">
        <property name="labelManagementService" ref="labelManagementService"/>
    </bean>

    <bean id="labelManagementRetrieveDefaultLanguage"
          class="com.armedia.acm.plugins.admin.web.api.LabelManagementRetrieveDefaultLanguage">
        <property name="labelManagementService" ref="labelManagementService"/>
    </bean>

    <bean id="labelManagementRetrieveNamespaces"
          class="com.armedia.acm.plugins.admin.web.api.LabelManagementRetrieveNamespaces">
        <property name="labelManagementService" ref="labelManagementService"/>
    </bean>

    <!-- Application properties management-->
    <bean id="angularPropertiesManagementRetrieveProperties"
          class="com.armedia.acm.plugins.admin.web.api.AngularPropertiesManagementRetrieveProperties">
        <property name="jsonPropertiesManagementService" ref="angularPropertiesManagementService"/>
    </bean>

    <bean id="angularPropertiesManagementRetrieveProperty"
          class="com.armedia.acm.plugins.admin.web.api.AngularPropertiesManagementRetrieveProperty">
        <property name="jsonPropertiesManagementService" ref="angularPropertiesManagementService"/>
    </bean>

    <bean id="angularPropertiesManagementUpdateProperty"
          class="com.armedia.acm.plugins.admin.web.api.AngularPropertiesManagementUpdateProperty">
        <property name="jsonPropertiesManagementService" ref="angularPropertiesManagementService"/>
    </bean>

    <!-- LDAP configuration API -->
    <bean id="ldapConfigurationService" class="com.armedia.acm.plugins.admin.web.api.LdapConfigurationService">
        <property name="encryptablePropertyUtils" ref="acmEncryptablePropertyUtils"/>
        <property name="ldapConfigurationTemplatesLocation"
                  value="#{ systemProperties ['user.home'] }/.arkcase/acm/spring/ldap-config-templates/"/>
        <property name="ldapTemplateFile" value="spring-config-ldap.xml.ftl"/>
        <property name="ldapTemplatePropertiesFile" value="spring-config-ldap.properties.ftl"/>

        <property name="ldapConfigurationLocation" value="#{ systemProperties ['user.home'] }/.arkcase/acm/spring/"/>
        <property name="ldapFile" value="spring-config-%s-ldap.xml"/>
        <property name="ldapPropertiesFile" value="spring-config-%s-ldap.properties"/>
        <property name="ldapPropertiesFileRegex" value="^spring[-d]config[-d][a-zA-Z0-9]+[-d]ldap.properties$"/>
    </bean>

    <bean id="ldapConfigurationRetrieveDirectories"
          class="com.armedia.acm.plugins.admin.web.api.LdapConfigurationRetrieveDirectories">
        <property name="ldapConfigurationService" ref="ldapConfigurationService"/>
    </bean>

    <bean id="ldapConfigurationCreateDirectory"
          class="com.armedia.acm.plugins.admin.web.api.LdapConfigurationCreateDirectory">
        <property name="ldapConfigurationService" ref="ldapConfigurationService"/>
    </bean>

    <bean id="ldapConfigurationDeleteDirectory"
          class="com.armedia.acm.plugins.admin.web.api.LdapConfigurationDeleteDirectory">
        <property name="ldapConfigurationService" ref="ldapConfigurationService"/>
    </bean>

    <bean id="ldapConfigurationUpdateDirectory"
          class="com.armedia.acm.plugins.admin.web.api.LdapConfigurationUpdateDirectory">
        <property name="ldapConfigurationService" ref="ldapConfigurationService"/>
    </bean>

    <!-- Roles Priveleges API-->
    <bean id="rolesPrivilegesCreateRole" class="com.armedia.acm.plugins.admin.web.api.RolesPrivilegesCreateRole">
        <property name="rolesPrivilegesService" ref="rolesPrivilegesService"/>
    </bean>

    <bean id="rolesPrivilegesUpdateRole" class="com.armedia.acm.plugins.admin.web.api.RolesPrivilegesUpdateRole">
        <property name="rolesPrivilegesService" ref="rolesPrivilegesService"/>
    </bean>

    <bean id="rolesPrivilegesAddRolesPrivileges"
          class="com.armedia.acm.plugins.admin.web.api.RolesPrivilegesAddRolesPrivileges">
        <property name="rolesPrivilegesService" ref="rolesPrivilegesService"/>
    </bean>

    <bean id="rolesPrivilegesRemoveRolesPrivileges"
          class="com.armedia.acm.plugins.admin.web.api.RolesPrivilegesRemoveRolesPrivileges">
        <property name="rolesPrivilegesService" ref="rolesPrivilegesService"/>
    </bean>

    <bean id="rolesPrivilegesRetrieveRoles" class="com.armedia.acm.plugins.admin.web.api.RolesPrivilegesRetrieveRoles">
        <property name="rolesPrivilegesService" ref="rolesPrivilegesService"/>
    </bean>

    <bean id="rolesPrivilegesRetrievePrivileges"
          class="com.armedia.acm.plugins.admin.web.api.RolesPrivilegesRetrievePrivileges">
        <property name="rolesPrivilegesService" ref="rolesPrivilegesService"/>
    </bean>

    <bean id="rolesPrivilegesRetrieveRolePrivileges"
          class="com.armedia.acm.plugins.admin.web.api.RolesPrivilegesRetrieveRolePrivileges">
        <property name="rolesPrivilegesService" ref="rolesPrivilegesService"/>
    </bean>

    <bean id="rolesPrivilegesRetrieveRolesByPrivilege"
          class="com.armedia.acm.plugins.admin.web.api.RolesPrivilegesRetrieveRolesByPrivilege">
        <property name="rolesPrivilegesService" ref="rolesPrivilegesService"/>
    </bean>

    <bean id="rolesPrivilegesUpdateRolePrivileges"
          class="com.armedia.acm.plugins.admin.web.api.RolesPrivilegesUpdateRolePrivileges">
        <property name="rolesPrivilegesService" ref="rolesPrivilegesService"/>
    </bean>

    <!-- Workflow Configuration -->
    <bean id="workflowConfigurationService" class="com.armedia.acm.plugins.admin.web.api.WorkflowConfigurationService">
        <property name="acmBpmnService" ref="processDefinitionManagementService"/>
        <property name="temporaryFolder" value="#{ systemProperties ['user.home'] }/.arkcase/acm/activiti/temp/"/>
    </bean>

    <bean id="workflowConfigurationRetrieveWorkflows"
          class="com.armedia.acm.plugins.admin.web.api.WorkflowConfigurationRetrieveWorkflows">
        <property name="workflowConfigurationService" ref="workflowConfigurationService"/>
    </bean>

    <bean id="workflowConfigurationRetrieveHistory"
          class="com.armedia.acm.plugins.admin.web.api.WorkflowConfigurationRetrieveHistory">
        <property name="workflowConfigurationService" ref="workflowConfigurationService"/>
    </bean>

    <bean id="workflowConfigurationRetrieveBpmnFile"
          class="com.armedia.acm.plugins.admin.web.api.WorkflowConfigurationRetrieveBpmnFile">
        <property name="workflowConfigurationService" ref="workflowConfigurationService"/>
    </bean>

    <bean id="workflowConfigurationReplaceBpmnFile"
          class="com.armedia.acm.plugins.admin.web.api.WorkflowConfigurationReplaceBpmnFile">
        <property name="workflowConfigurationService" ref="workflowConfigurationService"/>
    </bean>

    <bean id="workflowConfigurationMakeActive"
          class="com.armedia.acm.plugins.admin.web.api.WorkflowConfigurationMakeActive">
        <property name="workflowConfigurationService" ref="workflowConfigurationService"/>
    </bean>

    <!-- Link forms Workflows -->
    <bean id="linkFormsWorkflowsService" class="com.armedia.acm.plugins.admin.web.api.LinkFormsWorkflowsService">
        <property name="configurationLocation" value="#{ systemProperties ['user.home'] }/.arkcase/acm/rules/"/>
        <property name="configurationFile" value="drools-form-business-process-rules.xlsx"/>
        <property name="configurationFileBackupTemplate" value="drools-form-business-process-rules.xlsx.%s.backup"/>
        <property name="configurationFileBackupRegex"
                  value="^drools[-d]form[-d]business[-d]process[-d]rules.xlsx.[0-9]+.backup$"/>

        <property name="acmBpmnService" ref="processDefinitionManagementService"/>
        <property name="acmFileTypesService" ref="acmFileTypesService"/>
    </bean>

    <bean id="linkFormsWorkflowsRetrieveConfiguration"
          class="com.armedia.acm.plugins.admin.web.api.LinkFormsWorkflowsRetrieveConfiguration">
        <property name="linkFormsWorkflowsService" ref="linkFormsWorkflowsService"/>
    </bean>

    <bean id="linkFormsWorkflowsUpdateConfiguration"
          class="com.armedia.acm.plugins.admin.web.api.LinkFormsWorkflowsUpdateConfiguration">
        <property name="linkFormsWorkflowsService" ref="linkFormsWorkflowsService"/>
    </bean>

    <!-- Custom CSS -->
    <bean id="customCssService" class="com.armedia.acm.plugins.admin.web.api.CustomCssService">
        <property name="customCssFile" value="#{ systemProperties ['user.home'] }/.arkcase/acm/branding/custom.css"/>
    </bean>

    <bean id="customCssRetrieveFile" class="com.armedia.acm.plugins.admin.web.api.CustomCssRetrieveFile">
        <property name="customCssService" ref="customCssService"/>
    </bean>

    <bean id="customCssUpdateFile" class="com.armedia.acm.plugins.admin.web.api.CustomCssUpdateFile">
        <property name="customCssService" ref="customCssService"/>
    </bean>

    <!-- Custom Logo -->
    <bean id="customLogoService" class="com.armedia.acm.plugins.admin.web.api.CustomLogoService">
        <property name="brandingFilesLocation" value="#{ systemProperties ['user.home'] }/.arkcase/acm/branding/"/>
        <property name="headerLogoFile" value="header-logo.png"/>
        <property name="loginLogoFile" value="login-logo.png"/>
    </bean>

    <bean id="customLogoRetrieveFile" class="com.armedia.acm.plugins.admin.web.api.CustomLogoRetrieveFile">
        <property name="customLogoService" ref="customLogoService"/>
    </bean>

    <bean id="customLogoUploadFile" class="com.armedia.acm.plugins.admin.web.api.CustomLogoUploadFile">
        <property name="customLogoService" ref="customLogoService"/>
    </bean>

    <!-- Module Configuration -->
    <bean id="moduleConfigurationService" class="com.armedia.acm.plugins.admin.web.api.ModuleConfigurationService">
        <property name="appConfigPropertiesFile"
                  value="#{ systemProperties ['user.home'] }/.arkcase/acm/app-config.properties/"/>
    </bean>

    <bean id="moduleConfigurationRetrieveModules"
          class="com.armedia.acm.plugins.admin.web.api.ModuleConfigurationRetrieveModules">
        <property name="moduleConfigurationService" ref="moduleConfigurationService"/>
    </bean>


    <bean id="templateUpload" class="com.armedia.acm.plugins.admin.model.TemplateUpload"/>

    <bean id="getPlainFormsAPIController" class="com.armedia.acm.plugins.admin.web.api.GetPlainFormsAPIController">
        <property name="plainConfigurationFormFactory" ref="plainConfigurationFormFactory"/>
    </bean>

    <bean id="deletePlainFormAPIController" class="com.armedia.acm.plugins.admin.web.api.DeletePlainFormAPIController">
        <property name="plainConfigurationFormFactory" ref="plainConfigurationFormFactory"/>
        <property name="plainFormPropertiesLocation"
                  value="#{ systemProperties ['user.home'] }/.arkcase/acm/acm-forms-plain.properties"/>
        <property name="propertyFileManager" ref="propertyFileManager"/>
    </bean>

    <bean id="getPlainFormTargetsAPIController"
          class="com.armedia.acm.plugins.admin.web.api.GetPlainFormTargetsAPIController">
        <property name="plainConfigurationFormFactory" ref="plainConfigurationFormFactory"/>
    </bean>

    <bean id="googleAnalyticsConfigurationFile" class="java.io.File">
        <constructor-arg value="${user.home}/.arkcase/acm/googleAnalytics.properties"/>
    </bean>

    <bean id="googleAnalyticsConfigService" class="com.armedia.acm.plugins.admin.service.GoogleAnalyticsConfigService">
        <property name="configFile" ref="googleAnalyticsConfigurationFile"/>
    </bean>

    <bean id="googleAnalyticsConfigAPIController" class="com.armedia.acm.plugins.admin.web.api.GoogleAnalyticsConfigAPIController">
        <property name="googleAnalyticsConfigService" ref="googleAnalyticsConfigService"/>
    </bean>

</beans>
