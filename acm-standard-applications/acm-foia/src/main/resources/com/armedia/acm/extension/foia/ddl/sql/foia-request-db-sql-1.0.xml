<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
            http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <!-- Update class name for existing Person in database for FOIA -->
    <changeSet id="38-foia-acm_person-update-cm-class-name" author="ana.serafmoska"
               logicalFilePath="/ddl/sql/foia-request-db-sql-1.0.xml">
        <update tableName="acm_person">
            <column name="cm_class_name" value="gov.foia.model.FOIAPerson"/>
            <where>cm_class_name = "com.armedia.acm.plugins.person.model.Person"</where>
        </update>
    </changeSet>

    <changeSet id="39-update-request-legacy-data" author="vladimir.cherepnalkovski"
               logicalFilePath="/ddl/sql/foia-request-db-sql-1.0.xml">
        <sql>UPDATE acm_case_file SET fo_ttc_on_last_redirection = 20, fo_perfected_date = fo_received_date,
            cm_case_modified = NOW() WHERE fo_ttc_on_last_redirection IS NULL
        </sql>
    </changeSet>

    <changeSet id="40-update-redirected-legacy-data" author="vladimir.cherepnalkovski"
               logicalFilePath="/ddl/sql/foia-request-db-sql-1.0.xml">
        <sql>UPDATE acm_case_file SET fo_redirected_date = fo_perfected_date,
            cm_case_modified = NOW() WHERE fo_request_type= 'New Request'
        </sql>
    </changeSet>

</databaseChangeLog>

